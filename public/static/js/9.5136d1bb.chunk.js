(this.webpackJsonpb2b=this.webpackJsonpb2b||[]).push([[9],{1038:function(e,t,n){"use strict";n.r(t);var a=n(41),c=n(0),r=n(785),o=n(486),i=n(824),s=n(795),l=n.n(s),u=n(793),d=(n(810),n(477)),p=n(85),b=n(823),j=n(797),m=n(796),f=n(790),O=n(36),h=n(1),v=[{store:j.q,name:"features"}];t.default=Object(O.a)((function(e){var t=e.PERMISSIONS,n=e.features,O=Object(d.a)().t,v=Object(c.useState)(!1),g=Object(a.a)(v,2),x=g[0],y=g[1],C=Object(c.useState)([]),w=Object(a.a)(C,2),E=w[0],D=w[1],S=function(){y(!1),D([])};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(r.a,{basic:!0,children:[Object(h.jsx)(p.e,{title:O("Packages")}),Object(h.jsx)(r.a,{basic:!0,children:Object(h.jsxs)(l.a,{dataSource:j.w,showBorders:!0,columnHidingEnabled:!0,wordWrapEnabled:!0,columnAutoWidth:!0,repaintChangesOnly:!0,remoteOperations:!0,loadPanel:{indicatorSrc:m.a},onExporting:f.a,children:[Object(h.jsx)(s.RemoteOperations,{grouping:!0}),Object(h.jsx)(s.Sorting,{mode:"multiple"}),Object(h.jsx)(s.Grouping,{autoExpandAll:!1}),Object(h.jsx)(s.FilterRow,{visible:!0}),Object(h.jsx)(s.FilterPanel,{visible:!0}),Object(h.jsx)(s.Scrolling,{mode:"virtual"}),Object(h.jsx)(s.SearchPanel,{visible:!0}),Object(h.jsxs)(s.Editing,{mode:"popup",useIcons:!0,allowUpdating:t.UPDATE,allowDeleting:t.DELETE,allowAdding:t.ADD,refreshMode:"reshape",children:[Object(h.jsx)(s.Popup,{title:O("Package"),showTitle:!0,resizeEnabled:!0,children:Object(h.jsx)(s.Position,{my:"middle",at:"middle",of:window})}),Object(h.jsx)(s.Form,{children:Object(h.jsxs)(u.Item,{itemType:"group",colCount:2,colSpan:2,children:[Object(h.jsx)(u.Item,{isRequired:!0,dataField:"nameEn"}),Object(h.jsx)(u.Item,{isRequired:!0,dataField:"priceUsd"}),Object(h.jsx)(u.Item,{isRequired:!0,dataField:"validitySeconds"}),Object(h.jsx)(u.Item,{dataField:"isDefault"}),Object(h.jsx)(u.Item,{dataField:"isActive"}),Object(h.jsx)(u.Item,{dataField:"color"}),Object(h.jsx)(u.Item,{dataField:"descriptionEn",editorType:"dxTextArea",colSpan:2,editorOptions:{height:100}}),Object(h.jsx)(u.Item,{dataField:"imgUrl",colSpan:2})]})})]}),Object(h.jsx)(s.Column,{dataField:"imgUrl",width:100,allowSorting:!1,allowFiltering:!1,caption:O("Photo"),cellRender:function(e){var t=e.value;return Object(h.jsx)(o.a,{src:t,fluid:!0})},editCellComponent:p.f}),Object(h.jsx)(s.Column,{dataField:"nameEn",caption:O("Name")}),Object(h.jsx)(s.Column,{dataField:"descriptionEn",caption:O("Description"),cellRender:function(e){return function(e,t){if(!e)return null;var n=t||70;return e.length<=n?e:e.slice(0,n)+"..."}(e.value)}}),Object(h.jsx)(s.Column,{dataField:"priceUsd",caption:O("Price"),format:{type:"currency",precision:2}}),Object(h.jsx)(s.Column,{calculateDisplayValue:function(e){var t=e.validitySeconds;return"".concat(t/60/60/24," ").concat(O("Days"))},dataType:"number",dataField:"validitySeconds",calculateFilterExpression:function(e,t){return["validitySeconds",t||"=",60*e*60*24]},calculateCellValue:function(e){return e.validitySeconds/60/60/24},caption:O("Validity")}),Object(h.jsx)(s.Column,{dataField:"color",cellRender:function(e){var t=e.value;return Object(h.jsx)("div",{style:{backgroundColor:t||"white"},children:t})},caption:O("Hex Color")}),Object(h.jsx)(s.Column,{caption:O("Active"),dataType:"boolean",dataField:"isActive"}),Object(h.jsx)(s.Column,{caption:O("Default"),dataType:"boolean",dataField:"isDefault"}),Object(h.jsxs)(s.Column,{type:"buttons",caption:O("Actions"),children:[Object(h.jsx)(s.Button,{name:"edit"}),Object(h.jsx)(s.Button,{name:"delete"}),t.UPDATE&&Object(h.jsx)(s.Button,{hint:O("Features"),icon:"bulletlist",onClick:function(e){D([e.row.data.idSubscriptionPackage]),y(!0)}})]}),Object(h.jsx)(s.Export,{enabled:t.EXPORT})]})})]}),Object(h.jsx)(i.a,{onClose:S,open:x,content:Object(h.jsx)(b.a,{id:E[0],features:n,onSave:S}),closeIcon:!0,header:O("Features"),size:"large",centered:!0,closeOnDimmerClick:!1})]})}),v)},492:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(97),c=n(0),r=n.n(c),o=n(214),i=Object(o.a)()?r.a.useLayoutEffect:r.a.useEffect,s=/\s+/;var l=new Map,u=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(s).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),a=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(l.get(e)||[],n),c=a[0],r=a[1];e&&(c.forEach((function(t){return e.classList.add(t)})),r.forEach((function(t){return e.classList.remove(t)}))),l.set(e,n)},d=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var a=new Set;a.add(n),e.nodes.set(t,a)}},this.del=function(t,n){if(e.nodes.has(t)){var a=e.nodes.get(t);1!==a.size?a.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};function p(e,t){var n=r.a.useRef(),c=r.a.useRef(!1);i((function(){if(n.current=t,c.current){var r=Object(a.b)(e)?e.current:e;d.emit(r,u)}c.current=!0}),[t]),i((function(){var t=Object(a.b)(e)?e.current:e;return d.add(t,n),d.emit(t,u),function(){d.del(t,n),d.emit(t,u)}}),[e])}},790:function(e,t,n){"use strict";var a=n(799),c=n(800),r=n(31),o=n(801),i=n.n(o),s=n(802),l=n.n(s);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=new l.a.Workbook,s=o.addWorksheet(r.a.t("DataGrid"));Object(a.exportDataGrid)({component:e.component,worksheet:s,customizeCell:function(e){var a=e.gridCell,o=e.excelCell;if("data"===a.rowType){var i=n.find((function(e){return a.column.dataField===e.name}));i&&a.value&&(o.value=a.value.map((function(e){return i.data.find((function(t){return t[i.fieldName1]===e[i.fieldName2]}))[i.displayName]})).join()),t.find((function(e){return a.column.dataField===e}))&&(o.value=Object(c.htmlToText)(a.value,{wordwrap:null})),"creatAt"===a.column.dataField&&(o.value=new Date(a.value).toDateString()),"isActive"===a.column.dataField&&(o.value=a.value?r.a.t("YES"):r.a.t("NO"))}"group"===a.rowType&&(o.fill={type:"pattern",pattern:"solid",fgColor:{argb:"BEDFE6"}}),"totalFooter"===a.rowType&&o.value&&(o.font.italic=!0)}}).then((function(){o.xlsx.writeBuffer().then((function(e){i()(new Blob([e],{type:"application/octet-stream"}),"DataGrid.xlsx")}))})),e.cancel=!0}},823:function(e,t,n){"use strict";var a=n(4),c=n(8),r=n(94),o=n(14),i=n(41),s=n(0),l=n(785),u=n(784),d=n(774),p=n(795),b=n.n(p),j=n(53),m=n(85),f=n(796),O=n(1);t.a=Object(s.memo)(Object(d.a)()((function(e){var t=e.id,n=e.features,d=e.onSave,h=e.t,v=e.readOnly,g=Object(s.useState)(n),x=Object(i.a)(g,2),y=x[0],C=x[1],w=Object(s.useState)([]),E=Object(i.a)(w,2),D=E[0],S=E[1],P=Object(s.useState)(!1),F=Object(i.a)(P,2),N=F[0],k=F[1],A=Object(s.useState)(""),R=Object(i.a)(A,2),T=R[0],I=R[1],M=function(){var e=Object(o.a)(Object(a.a)().mark((function e(){var n,o,i,s,l;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.b.get("/admin/subscription/package/".concat(t,"/features"));case 3:for(n=e.sent,o=n.data.data,i=Object(r.a)(y),s=0;s<y.length;s++)for(l=0;l<o.length;l++)y[s].idSubscriptionFeature===o[l].subscriptionFeatureId&&(i[s].featureValue=o[l].featureValue);C(i),S(o.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{idSubscriptionFeature:e.subscriptionFeatureId})}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,j.b.post("/admin/subscription/package/features/reset",{features:D.filter((function(e){return e.featureValue})).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{subscriptionFeatureId:e.idSubscriptionFeature})})),subscriptionPackageId:t});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),I(e.t0);case 9:return e.prev=9,k(!1),d&&d(),e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[0,6,9,13]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return M(),function(){return S([])}}),[]),T?Object(O.jsx)(m.b,{}):Object(O.jsxs)(l.a,{basic:!0,children:[Object(O.jsxs)(b.a,{dataSource:y,keyExpr:"idSubscriptionFeature",wordWrapEnabled:!0,columnAutoWidth:!0,showBorders:!0,columnHidingEnabled:!0,hoverStateEnabled:!0,loadPanel:{indicatorSrc:f.a},selectedRowKeys:D.map((function(e){return e.idSubscriptionFeature})),onSelectionChanged:function(e){return S(e.selectedRowsData.length&&e.selectedRowsData.filter((function(e){return e.featureValue}))||[])},children:[!v&&Object(O.jsx)(p.Editing,{mode:"batch",useIcons:!0,allowUpdating:!0,refreshMode:"reshape"}),!v&&Object(O.jsx)(p.Selection,{mode:"multiple"}),Object(O.jsx)(p.Column,{dataField:"nameEn",allowEditing:!1,caption:h("Time")}),Object(O.jsx)(p.Column,{dataField:"descriptionEn",allowEditing:!1,caption:h("Description")}),Object(O.jsx)(p.Column,{dataField:"featureValue",dataType:"number",caption:h("Value")})]}),!v&&Object(O.jsx)(l.a,{basic:!0,textAlign:"right",children:Object(O.jsx)(u.a,{onClick:U,positive:!0,loading:N,children:h("Save")})})]})})))},824:function(e,t,n){"use strict";var a=n(2),c=n(20),r=n(244),o=n(243),i=n(60),s=n(245),l=n(172),u=n(11),d=n(787),p=n(7),b=n(0),j=n.n(b),m=n(171),f=n.n(m),O=n(214),h=n(461),v=n(205),g=n(27),x=n(202),y=n(9),C=n(201),w=n(387),E=n(207),D=n(788),S=n(93),P=n(345),F=n(784),N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))||this).handleButtonOverrides=function(e){return{onClick:function(n,a){Object(u.a)(e,"onClick",n,a),Object(u.a)(t.props,"onActionClick",n,a)}}},t}return Object(c.a)(t,e),t.prototype.render=function(){var e=this,n=this.props,c=n.actions,r=n.children,o=n.className,i=n.content,s=Object(p.a)("actions",o),l=Object(C.a)(t,this.props),u=Object(x.a)(t,this.props);return y.b.isNil(r)?y.b.isNil(i)?j.a.createElement(u,Object(a.a)({},l,{className:s}),Object(S.a)(c,(function(t){return F.a.create(t,{overrideProps:e.handleButtonOverrides})}))):j.a.createElement(u,Object(a.a)({},l,{className:s}),i):j.a.createElement(u,Object(a.a)({},l,{className:s}),r)},t}(b.Component);function k(e){var t=e.children,n=e.className,c=e.content,r=e.image,o=e.scrolling,i=Object(p.a)(n,Object(g.a)(r,"image"),Object(g.a)(o,"scrolling"),"content"),s=Object(C.a)(k,e),l=Object(x.a)(k,e);return j.a.createElement(l,Object(a.a)({},s,{className:i}),y.b.isNil(t)?c:t)}N.handledProps=["actions","as","children","className","content","onActionClick"],N.propTypes={},N.create=Object(P.f)(N,(function(e){return{actions:e}})),k.handledProps=["as","children","className","content","image","scrolling"],k.propTypes={},k.create=Object(P.f)(k,(function(e){return{content:e}}));var A=k;function R(e){var t=e.children,n=e.className,c=e.content,r=Object(p.a)("description",n),o=Object(C.a)(R,e),i=Object(x.a)(R,e);return j.a.createElement(i,Object(a.a)({},o,{className:r}),y.b.isNil(t)?c:t)}R.handledProps=["as","children","className","content"],R.propTypes={};var T=R,I=n(492);function M(e){var t=e.blurring,n=e.children,c=e.className,r=e.centered,o=e.content,i=e.inverted,s=e.mountNode,l=e.scrolling,u=j.a.useRef(),b=Object(p.a)("ui",Object(g.a)(i,"inverted"),Object(g.a)(!r,"top aligned"),"page modals dimmer transition visible active",c),m=Object(p.a)("dimmable dimmed",Object(g.a)(t,"blurring"),Object(g.a)(l,"scrolling")),f=Object(C.a)(M,e),O=Object(x.a)(M,e);return Object(I.a)(s,m),j.a.useEffect((function(){u.current&&u.current.style&&u.current.style.setProperty("display","flex","important")}),[]),j.a.createElement(d.a,{innerRef:u},j.a.createElement(O,Object(a.a)({},f,{className:b}),y.b.isNil(n)?o:n))}M.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],M.propTypes={},M.create=Object(P.f)(M,(function(e){return{content:e}}));var U=M;function B(e){var t=e.children,n=e.className,c=e.content,r=Object(p.a)("header",n),o=Object(C.a)(B,e),i=Object(x.a)(B,e);return j.a.createElement(i,Object(a.a)({},o,{className:r}),y.b.isNil(t)?c:t)}B.handledProps=["as","children","className","content"],B.propTypes={},B.create=Object(P.f)(B,(function(e){return{content:e}}));var V=B,q=function(e){var t=e.height+0,n=e.height+0,a=window.innerHeight;return a/2+-n/2+t+50<a},G=function(e,t,n){var a=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:a}},W=function(){return!window.ActiveXObject&&"ActiveXObject"in window},z=function(e){function t(){for(var n,c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).legacy=Object(O.a)()&&W(),n.ref=Object(b.createRef)(),n.dimmerRef=Object(b.createRef)(),n.latestDocumentMouseDownEvent=null,n.getMountNode=function(){return Object(O.a)()?n.props.mountNode||document.body:null},n.handleActionsOverrides=function(e){return{onActionClick:function(t,a){Object(u.a)(e,"onActionClick",t,a),Object(u.a)(n.props,"onActionClick",t,n.props),n.handleClose(t)}}},n.handleClose=function(e){n.setState({open:!1}),Object(u.a)(n.props,"onClose",e,Object(a.a)({},n.props,{open:!1}))},n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDimmerClick,c=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!t||Object(h.a)(n.ref.current,c)||Object(h.a)(n.ref.current,e)||(n.setState({open:!1}),Object(u.a)(n.props,"onClose",e,Object(a.a)({},n.props,{open:!1})))},n.handleIconOverrides=function(e){return{onClick:function(t){Object(u.a)(e,"onClick",t),n.handleClose(t)}}},n.handleOpen=function(e){Object(u.a)(n.props,"onOpen",e,Object(a.a)({},n.props,{open:!0})),n.setState({open:!0})},n.handlePortalMount=function(e){var t=n.props.eventPool;n.setState({scrolling:!1}),n.setPositionAndClassNames(),v.a.sub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),v.a.sub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Object(u.a)(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){var t=n.props.eventPool;cancelAnimationFrame(n.animationRequestId),v.a.unsub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),v.a.unsub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Object(u.a)(n.props,"onUnmount",e,n.props)},n.setPositionAndClassNames=function(){var e,t=n.props.centered,a={};if(n.ref.current){var c=n.ref.current.getBoundingClientRect(),r=q(c);e=!r;var o=n.legacy?G(r,t,c):{};f()(n.state.legacyStyles,o)||(a.legacyStyles=o),n.state.scrolling!==e&&(a.scrolling=e)}Object(l.a)(a)||n.setState(a),n.animationRequestId=requestAnimationFrame(n.setPositionAndClassNames)},n.renderContent=function(e){var c=n.props,r=c.actions,o=c.basic,i=c.children,s=c.className,l=c.closeIcon,u=c.content,b=c.header,m=c.size,f=c.style,O=n.state,h=O.legacyStyles,v=O.scrolling,C=Object(p.a)("ui",m,Object(g.a)(o,"basic"),Object(g.a)(n.legacy,"legacy"),Object(g.a)(v,"scrolling"),"modal transition visible active",s),w=Object(x.a)(t,n.props),D=!0===l?"close":l,S=E.a.create(D,{overrideProps:n.handleIconOverrides});return j.a.createElement(d.a,{innerRef:n.ref},j.a.createElement(w,Object(a.a)({},e,{className:C,style:Object(a.a)({},h,f)}),S,y.b.isNil(i)?j.a.createElement(j.a.Fragment,null,V.create(b,{autoGenerateKey:!1}),A.create(u,{autoGenerateKey:!1}),N.create(r,{overrideProps:n.handleActionsOverrides})):i))},n}Object(c.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.handlePortalUnmount()},n.render=function(){var e=this.props,n=e.centered,c=e.closeOnDocumentClick,l=e.dimmer,u=e.eventPool,p=e.trigger,m=this.state,f=m.open,h=m.scrolling,v=this.getMountNode();if(!Object(O.a)())return Object(b.isValidElement)(p)?p:null;var g=Object(C.a)(t,this.props),x=D.a.handledProps,y=Object(s.a)(g,(function(e,t,n){return Object(i.a)(x,n)||(e[n]=t),e}),{}),w=Object(o.a)(g,x);return j.a.createElement(D.a,Object(a.a)({closeOnDocumentClick:c},w,{trigger:p,eventPool:u,mountNode:v,open:f,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),j.a.createElement(d.a,{innerRef:this.dimmerRef},U.create(Object(r.a)(l)?l:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===l,inverted:"inverted"===l},overrideProps:{children:this.renderContent(y),centered:n,mountNode:v,scrolling:h}})))},t}(w.a);z.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],z.propTypes={},z.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},z.autoControlledProps=["open"],z.Actions=N,z.Content=A,z.Description=T,z.Dimmer=U,z.Header=V;t.a=z}}]);
//# sourceMappingURL=9.5136d1bb.chunk.js.map