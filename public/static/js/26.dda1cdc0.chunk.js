(this.webpackJsonpb2b=this.webpackJsonpb2b||[]).push([[26],{748:function(e,t,a){"use strict";var n=a(756),c=a(757),r=a(28),i=a(758),o=a.n(i),d=a(759),l=a.n(d);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new l.a.Workbook,d=i.addWorksheet(r.a.t("DataGrid"));Object(n.exportDataGrid)({component:e.component,worksheet:d,customizeCell:function(e){var n=e.gridCell,i=e.excelCell;if("data"===n.rowType){var o=a.find((function(e){return n.column.dataField===e.name}));o&&n.value&&(i.value=n.value.map((function(e){return o.data.find((function(t){return t[o.fieldName1]===e[o.fieldName2]}))[o.displayName]})).join()),t.find((function(e){return n.column.dataField===e}))&&(i.value=Object(c.htmlToText)(n.value,{wordwrap:null})),"creatAt"===n.column.dataField&&(i.value=new Date(n.value).toDateString()),"isActive"===n.column.dataField&&(i.value=n.value?r.a.t("YES"):r.a.t("NO"))}"group"===n.rowType&&(i.fill={type:"pattern",pattern:"solid",fgColor:{argb:"BEDFE6"}}),"totalFooter"===n.rowType&&i.value&&(i.font.italic=!0)}}).then((function(){i.xlsx.writeBuffer().then((function(e){o()(new Blob([e],{type:"application/octet-stream"}),"DataGrid.xlsx")}))})),e.cancel=!0}},992:function(e,t,a){"use strict";a.r(t);var n=a(32),c=a(62),r=a(53),i=a(0),o=a(744),d=a(194),l=a(815),s=a(754),u=a.n(s),j=a(750),b=a(456),p=a(89),O=a(752),f=a(751),h=a(748),x=a(31),m=a(763),g=a(54),v=a(8),y=a(734),I=a(458),w=a(743),C=a(739),k=a(746),F=a(733),A=a(28),S=a(63),E=a.p+"static/media/wall1.7a23f64d.jpg",B=("url(".concat(E,")"),{padding:0,margin:1}),P=a(1),R=Object(F.a)()((function(e){var t=e.idUser,a=e.t,l="ar"===A.a.language,s=B,u=Object(i.useState)([]),j=Object(r.a)(u,2),b=j[0],f=j[1],h=Object(i.useState)([]),x=Object(r.a)(h,2),F=x[0],E=x[1],R=Object(i.useState)([]),T=Object(r.a)(R,2),D=T[0],N=T[1],U=Object(i.useState)([]),L=Object(r.a)(U,2),M=L[0],W=L[1],q=Object(i.useState)({categoryId:null,brandId:null}),J=Object(r.a)(q,2),z=J[0],G=J[1],_=Object(i.useState)(!1),H=Object(r.a)(_,2),K=H[0],X=H[1],Y=Object(i.useState)(""),Q=Object(r.a)(Y,2),V=Q[0],Z=Q[1],$=Object(i.useState)(!1),ee=Object(r.a)($,2),te=(ee[0],ee[1],function(e){var t=e.props,a=e.value;G(Object(v.a)(Object(v.a)({},z),{},Object(g.a)({brandId:null},t,a)))});Object(i.useEffect)((function(){ae(),ne(),ce()}),[]);var ae=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var a,c,r,i,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),e.prev=1,e.next=4,O.g.load();case 4:return c=e.sent,r=c.data,e.next=8,S.b.get("/admin/users/cares/full",{params:{idUser:t}});case 8:i=e.sent,o=i.data.data,f(r),W(o),te({props:"categoryId",value:null===(a=r[0])||void 0===a?void 0:a.idCategory}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Z(e.t0);case 18:return e.prev=18,X(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.d.load();case 3:t=e.sent,a=t.data,E(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Z(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.A.load();case 3:t=e.sent,a=t.data,N(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Z(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return K?Object(P.jsx)(o.a,{basic:!0,padded:!0,loading:K}):V?Object(P.jsx)(p.b,{}):Object(P.jsx)(o.a,{basic:!0,children:Object(P.jsxs)(y.a,{columns:"equal",stretched:!0,verticalAlign:"top",divided:!0,children:[Object(P.jsxs)(I.a,{children:[Object(P.jsx)(w.a,{as:"h5",content:a("Categories")}),Object(P.jsx)(C.a,{children:b.map((function(e,a){var n=z.categoryId===e.idCategory;return Object(P.jsx)(C.a.Field,{style:s,children:Object(P.jsxs)(y.a,{columns:"2",children:[Object(P.jsx)(I.a,{width:"2",children:Object(P.jsx)(k.a,{checked:!!M.find((function(t){return t.categoryId===e.idCategory})),onChange:function(a,n){var c=n.checked;!function(e){M.find((function(t){return t.categoryId===e.idCategory}))?W(M.filter((function(t){return t.categoryId!==e.idCategory}))):W([].concat(Object(m.a)(M),[{idUser:t,categoryId:e.idCategory,brandId:null,productId:null}]))}(e),c&&te({props:"categoryId",value:e.idCategory})},disabled:!0})}),Object(P.jsx)(I.a,{width:"14",children:Object(P.jsxs)("div",{onClick:function(){return te({props:"categoryId",value:e.idCategory})},style:{display:"flex",justifyContent:"space-between",color:n?"blue":"black",cursor:"pointer"},children:[Object(P.jsx)("label",{style:{cursor:"pointer"},children:l?e.nameAr:e.nameEn}),Object(P.jsx)(d.a,{link:!0,name:n?"chevron right":"chevron down",color:n?"blue":"black"})]})})]})},a)}))})]}),Object(P.jsxs)(I.a,{children:[Object(P.jsx)(w.a,{as:"h5",content:a("Brands")}),Object(P.jsx)(C.a,{children:F.filter((function(e){return e.categoryId===z.categoryId})).map((function(e,a){var n=z.brandId===e.idBrand;return Object(P.jsx)(C.a.Field,{style:s,children:Object(P.jsxs)(y.a,{columns:"2",children:[Object(P.jsx)(I.a,{width:"2",children:Object(P.jsx)(k.a,{checked:!!M.filter((function(e){return e.categoryId===z.categoryId})).find((function(t){return t.brandId===e.idBrand})),onChange:function(a,n){var c=n.checked;!function(e){if(-1!==M.findIndex((function(t){return t.categoryId===z.categoryId&&t.brandId===e.idBrand}))){var a=M.filter((function(t){return t.categoryId===z.categoryId&&t.brandId===e.idBrand}));W(M.filter((function(e){return!a.includes(e)})))}else W([].concat(Object(m.a)(M),[{idUser:t,categoryId:z.categoryId,brandId:e.idBrand,productId:null}]))}(e),c&&te({props:"brandId",value:e.idBrand})},disabled:!0})}),Object(P.jsx)(I.a,{width:"14",children:Object(P.jsxs)("div",{onClick:function(){return te({props:"brandId",value:e.idBrand})},style:{display:"flex",justifyContent:"space-between",color:n?"blue":"black",cursor:"pointer"},children:[Object(P.jsx)("label",{style:{cursor:"pointer"},children:l?e.nameAr:e.nameEn}),Object(P.jsx)(d.a,{link:!0,name:n?"chevron right":"chevron down",color:n?"blue":"black"})]})})]})},a)}))})]}),Object(P.jsxs)(I.a,{children:[Object(P.jsx)(w.a,{as:"h5",content:a("Products")}),Object(P.jsx)(C.a,{children:D.filter((function(e){return e.brandId===z.brandId})).map((function(e,a){return Object(P.jsx)(C.a.Field,{children:Object(P.jsx)(k.a,{label:l?e.nameAr:e.nameEn,checked:!!M.filter((function(e){return e.categoryId===z.categoryId&&e.brandId===z.brandId})).find((function(t){return t.productId===e.idProduct})),onChange:function(){return function(e){var a=M.findIndex((function(t){return t.categoryId===z.categoryId&&t.brandId===z.brandId&&t.productId===e.idProduct}));if(-1!==a){var n=Object(m.a)(M);n.splice(a,1),W(n)}else W([].concat(Object(m.a)(M),[{idUser:t,categoryId:z.categoryId,brandId:z.brandId,productId:e.idProduct}]))}(e)},disabled:!0})},a)}))})]})]})})})),T=[{store:O.k,name:"companies"}];t.default=Object(x.a)((function(e){var t=Object(b.a)().t,a=e.companies,x=e.PERMISSIONS,m=Object(i.createRef)(),g=Object(i.useState)(!1),v=Object(r.a)(g,2),y=v[0],I=v[1],w=Object(i.useState)([]),C=Object(r.a)(w,2),k=C[0],F=C[1];return Object(P.jsxs)(o.a,{basic:!0,children:[Object(P.jsx)(p.d,{title:t("Clinets")}),Object(P.jsx)(o.a,{basic:!0,children:Object(P.jsxs)(u.a,{ref:m,dataSource:{store:O.J,filter:["roleId","=","NORMAL_USER"]},showBorders:!0,showColumnLines:!0,columnHidingEnabled:!0,wordWrapEnabled:!0,columnAutoWidth:!0,repaintChangesOnly:!0,remoteOperations:!0,allowColumnResizing:!0,allowColumnReordering:!0,onExporting:h.a,onToolbarPreparing:function(e){x.UPDATE&&(e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"unselectall",hint:t("RejectAll"),onClick:function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=m.current.instance.getSelectedRowKeys()||[]).length){e.next=5;break}return e.next=4,O.J.activate({isAccepted:!1,usersIds:t});case 4:m.current._instance.refresh();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"selectall",hint:t("AcceptAll"),onClick:function(){var e=Object(c.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=m.current.instance.getSelectedRowKeys()||[]).length){e.next=5;break}return e.next=4,O.J.activate({isAccepted:!0,usersIds:t});case 4:m.current._instance.refresh();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))},selection:{allowSelectAll:!0,mode:"multiple",selectAllMode:"page",showCheckBoxesMode:"always"},loadPanel:{indicatorSrc:f.a},children:[Object(P.jsx)(s.Sorting,{mode:"multiple"}),Object(P.jsx)(s.FilterRow,{visible:!0}),Object(P.jsx)(s.FilterPanel,{visible:!0}),Object(P.jsx)(s.Scrolling,{mode:"infinite"}),Object(P.jsx)(s.SearchPanel,{visible:!0}),Object(P.jsx)(s.Editing,{mode:"popup",useIcons:!0,allowUpdating:x.UPDATE,allowDeleting:x.DELETE,allowAdding:x.ADD,refreshMode:"reshape",children:Object(P.jsx)(s.Form,{children:Object(P.jsxs)(j.Item,{itemType:"group",colCount:2,colSpan:2,children:[Object(P.jsx)(j.Item,{dataField:"firstName",isRequired:!0}),Object(P.jsx)(j.Item,{dataField:"lastName",isRequired:!0}),Object(P.jsx)(j.Item,{dataField:"email",isRequired:!0}),Object(P.jsx)(j.Item,{dataField:"hasMobileWhatsapp"}),Object(P.jsx)(j.Item,{dataField:"mobile",isRequired:!0}),Object(P.jsx)(j.Item,{dataField:"companyId"}),Object(P.jsx)(j.Item,{dataField:"score"}),Object(P.jsx)(j.Item,{dataField:"isActive"}),Object(P.jsx)(j.Item,{dataField:"isAccepted"}),Object(P.jsx)(j.Item,{dataField:"password",colSpan:2,editorOptions:{placeholder:"If you fill this field the password of the client will be changed"}})]})})}),Object(P.jsx)(s.Column,{dataField:"firstName",caption:t("FirstName")}),Object(P.jsx)(s.Column,{dataField:"lastName",caption:t("LastName")}),Object(P.jsx)(s.Column,{dataField:"email",caption:t("Email")}),Object(P.jsx)(s.Column,{dataField:"mobile",caption:t("Mobile")}),Object(P.jsx)(s.Column,{caption:t("Has WhatsApp"),dataType:"boolean",dataField:"hasMobileWhatsapp",width:100}),Object(P.jsx)(s.Column,{dataField:"companyId",caption:t("Company"),children:Object(P.jsx)(s.Lookup,{dataSource:a,valueExpr:"idCompany",displayExpr:"nameEn"})}),Object(P.jsx)(s.Column,{dataField:"lastLoginAt",dataType:"datetime",caption:t("Last Login")}),Object(P.jsx)(s.Column,{dataField:"score",dataType:"number",caption:t("Score")}),Object(P.jsx)(s.Column,{caption:t("Accepted"),dataType:"boolean",dataField:"isAccepted",width:100}),Object(P.jsx)(s.Column,{caption:t("Active"),dataType:"boolean",dataField:"isActive",width:100}),Object(P.jsxs)(s.Column,{type:"buttons",caption:t("Actions"),children:[Object(P.jsx)(s.Button,{name:"edit"}),Object(P.jsx)(s.Button,{name:"delete"})]}),Object(P.jsx)(s.Column,{type:"buttons",caption:t("PreferredProducts"),cellRender:function(e){var t=e.data;return Object(P.jsx)("div",{children:Object(P.jsx)(d.a,{name:"list",link:!0,color:"blue",onClick:function(){return function(e){F([e]),I(!0)}(t)}})})}}),Object(P.jsx)(s.Export,{enabled:x.EXPORT})]})}),Object(P.jsx)(l.a,{onClose:function(){I(!1),F([])},open:y,content:k[0]&&Object(P.jsx)(R,{idUser:k[0].idUser}),closeIcon:!0,header:t("PreferredProducts"),size:"large",centered:!0,closeOnDimmerClick:!1})]})}),T)}}]);
//# sourceMappingURL=26.dda1cdc0.chunk.js.map